import{s as ye,M as Ne,i as je,f as A,p as Be,q as Le,e as v,a as I,t as Oe,c as d,b as C,m as z,g as T,d as Ce,r as x,N as ae,o as w,O as Ve,h as p,P as De,H as Ie,j as Te,I as Re,Q as ze}from"./scheduler.pQTnBLPT.js";import{S as He,i as Fe,t as ce,g as Je,b as de,e as Ue,c as Xe,a as Qe,m as We,d as Ye}from"./index.BeTO4F14.js";import{P as Ze}from"./Problem.C97zrMc_.js";import{b as Ge}from"./Trucks.gW6g2ETi.js";import{h as Ke}from"./has_field.olGNMGC8.js";import{p as Se}from"./parse_with_commas.BiYKGtV3.js";import"./_Uint8Array.z7pli0Iv.js";import"./parse.E7PnpR0O.js";var H=1e6,ke=1e6,K="[big.js] ",$=K+"Invalid ",le=$+"decimal places",$e=$+"rounding mode",qe=K+"Division by zero",m={},M=void 0;function F(e,r,t,n){var s=e.c;if(t===M&&(t=e.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error($e);if(r<1)n=t===3&&(n||!!s[0])||r===0&&(t===1&&s[0]>=5||t===2&&(s[0]>5||s[0]===5&&(n||s[1]!==M))),s.length=1,n?(e.e=e.e-r+1,s[0]=1):s[0]=e.e=0;else if(r<s.length){if(n=t===1&&s[r]>=5||t===2&&(s[r]>5||s[r]===5&&(n||s[r+1]!==M||s[r-1]&1))||t===3&&(n||!!s[0]),s.length=r,n){for(;++s[--r]>9;)if(s[r]=0,r===0){++e.e,s.unshift(1);break}}for(r=s.length;!s[--r];)s.pop()}return e}function Y(e,r,t){var n=e.e,s=e.c.join(""),a=s.length;if(r)s=s.charAt(0)+(a>1?"."+s.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)s="0"+s;s="0."+s}else if(n>0)if(++n>a)for(n-=a;n--;)s+="0";else n<a&&(s=s.slice(0,n)+"."+s.slice(n));else a>1&&(s=s.charAt(0)+"."+s.slice(1));return e.s<0&&t?"-"+s:s}m.abs=function(){var e=new this.constructor(this);return e.s=1,e};m.cmp=function(e){var r,t=this,n=t.c,s=(e=new t.constructor(e)).c,a=t.s,l=e.s,o=t.e,c=e.e;if(!n[0]||!s[0])return n[0]?a:s[0]?-l:0;if(a!=l)return a;if(r=a<0,o!=c)return o>c^r?1:-1;for(l=(o=n.length)<(c=s.length)?o:c,a=-1;++a<l;)if(n[a]!=s[a])return n[a]>s[a]^r?1:-1;return o==c?0:o>c^r?1:-1};m.div=function(e){var r=this,t=r.constructor,n=r.c,s=(e=new t(e)).c,a=r.s==e.s?1:-1,l=t.DP;if(l!==~~l||l<0||l>H)throw Error(le);if(!s[0])throw Error(qe);if(!n[0])return e.s=a,e.c=[e.e=0],e;var o,c,i,_,u,E=s.slice(),g=o=s.length,B=n.length,h=n.slice(0,o),f=h.length,N=e,J=N.c=[],L=0,O=l+(N.e=r.e-e.e)+1;for(N.s=a,a=O<0?0:O,E.unshift(0);f++<o;)h.push(0);do{for(i=0;i<10;i++){if(o!=(f=h.length))_=o>f?1:-1;else for(u=-1,_=0;++u<o;)if(s[u]!=h[u]){_=s[u]>h[u]?1:-1;break}if(_<0){for(c=f==o?s:E;f;){if(h[--f]<c[f]){for(u=f;u&&!h[--u];)h[u]=9;--h[u],h[f]+=10}h[f]-=c[f]}for(;!h[0];)h.shift()}else break}J[L++]=_?i:++i,h[0]&&_?h[f]=n[g]||0:h=[n[g]]}while((g++<B||h[0]!==M)&&a--);return!J[0]&&L!=1&&(J.shift(),N.e--,O--),L>O&&F(N,O,t.RM,h[0]!==M),N};m.eq=function(e){return this.cmp(e)===0};m.gt=function(e){return this.cmp(e)>0};m.gte=function(e){return this.cmp(e)>-1};m.lt=function(e){return this.cmp(e)<0};m.lte=function(e){return this.cmp(e)<1};m.minus=m.sub=function(e){var r,t,n,s,a=this,l=a.constructor,o=a.s,c=(e=new l(e)).s;if(o!=c)return e.s=-c,a.plus(e);var i=a.c.slice(),_=a.e,u=e.c,E=e.e;if(!i[0]||!u[0])return u[0]?e.s=-c:i[0]?e=new l(a):e.s=1,e;if(o=_-E){for((s=o<0)?(o=-o,n=i):(E=_,n=u),n.reverse(),c=o;c--;)n.push(0);n.reverse()}else for(t=((s=i.length<u.length)?i:u).length,o=c=0;c<t;c++)if(i[c]!=u[c]){s=i[c]<u[c];break}if(s&&(n=i,i=u,u=n,e.s=-e.s),(c=(t=u.length)-(r=i.length))>0)for(;c--;)i[r++]=0;for(c=r;t>o;){if(i[--t]<u[t]){for(r=t;r&&!i[--r];)i[r]=9;--i[r],i[t]+=10}i[t]-=u[t]}for(;i[--c]===0;)i.pop();for(;i[0]===0;)i.shift(),--E;return i[0]||(e.s=1,i=[E=0]),e.c=i,e.e=E,e};m.mod=function(e){var r,t=this,n=t.constructor,s=t.s,a=(e=new n(e)).s;if(!e.c[0])throw Error(qe);return t.s=e.s=1,r=e.cmp(t)==1,t.s=s,e.s=a,r?new n(t):(s=n.DP,a=n.RM,n.DP=n.RM=0,t=t.div(e),n.DP=s,n.RM=a,this.minus(t.times(e)))};m.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e};m.plus=m.add=function(e){var r,t,n,s=this,a=s.constructor;if(e=new a(e),s.s!=e.s)return e.s=-e.s,s.minus(e);var l=s.e,o=s.c,c=e.e,i=e.c;if(!o[0]||!i[0])return i[0]||(o[0]?e=new a(s):e.s=s.s),e;if(o=o.slice(),r=l-c){for(r>0?(c=l,n=i):(r=-r,n=o),n.reverse();r--;)n.push(0);n.reverse()}for(o.length-i.length<0&&(n=i,i=o,o=n),r=i.length,t=0;r;o[r]%=10)t=(o[--r]=o[r]+i[r]+t)/10|0;for(t&&(o.unshift(t),++c),r=o.length;o[--r]===0;)o.pop();return e.c=o,e.e=c,e};m.pow=function(e){var r=this,t=new r.constructor("1"),n=t,s=e<0;if(e!==~~e||e<-ke||e>ke)throw Error($+"exponent");for(s&&(e=-e);e&1&&(n=n.times(r)),e>>=1,!!e;)r=r.times(r);return s?t.div(n):n};m.prec=function(e,r){if(e!==~~e||e<1||e>H)throw Error($+"precision");return F(new this.constructor(this),e,r)};m.round=function(e,r){if(e===M)e=0;else if(e!==~~e||e<-H||e>H)throw Error(le);return F(new this.constructor(this),e+this.e+1,r)};m.sqrt=function(){var e,r,t,n=this,s=n.constructor,a=n.s,l=n.e,o=new s("0.5");if(!n.c[0])return new s(n);if(a<0)throw Error(K+"No square root");a=Math.sqrt(n+""),a===0||a===1/0?(r=n.c.join(""),r.length+l&1||(r+="0"),a=Math.sqrt(r),l=((l+1)/2|0)-(l<0||l&1),e=new s((a==1/0?"5e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+l)):e=new s(a+""),l=e.e+(s.DP+=4);do t=e,e=o.times(t.plus(n.div(t)));while(t.c.slice(0,l).join("")!==e.c.slice(0,l).join(""));return F(e,(s.DP-=4)+e.e+1,s.RM)};m.times=m.mul=function(e){var r,t=this,n=t.constructor,s=t.c,a=(e=new n(e)).c,l=s.length,o=a.length,c=t.e,i=e.e;if(e.s=t.s==e.s?1:-1,!s[0]||!a[0])return e.c=[e.e=0],e;for(e.e=c+i,l<o&&(r=s,s=a,a=r,i=l,l=o,o=i),r=new Array(i=l+o);i--;)r[i]=0;for(c=o;c--;){for(o=0,i=l+c;i>c;)o=r[i]+a[c]*s[i-c-1]+o,r[i--]=o%10,o=o/10|0;r[i]=o}for(o?++e.e:r.shift(),c=r.length;!r[--c];)r.pop();return e.c=r,e};m.toExponential=function(e,r){var t=this,n=t.c[0];if(e!==M){if(e!==~~e||e<0||e>H)throw Error(le);for(t=F(new t.constructor(t),++e,r);t.c.length<e;)t.c.push(0)}return Y(t,!0,!!n)};m.toFixed=function(e,r){var t=this,n=t.c[0];if(e!==M){if(e!==~~e||e<0||e>H)throw Error(le);for(t=F(new t.constructor(t),e+t.e+1,r),e=e+t.e+1;t.c.length<e;)t.c.push(0)}return Y(t,!1,!!n)};m[Symbol.for("nodejs.util.inspect.custom")]=m.toJSON=m.toString=function(){var e=this,r=e.constructor;return Y(e,e.e<=r.NE||e.e>=r.PE,!!e.c[0])};m.toNumber=function(){var e=Number(Y(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(e.toString()))throw Error(K+"Imprecise conversion");return e};m.toPrecision=function(e,r){var t=this,n=t.constructor,s=t.c[0];if(e!==M){if(e!==~~e||e<1||e>H)throw Error($+"precision");for(t=F(new n(t),e,r);t.c.length<e;)t.c.push(0)}return Y(t,e<=t.e||t.e<=n.NE||t.e>=n.PE,!!s)};m.valueOf=function(){var e=this,r=e.constructor;if(r.strict===!0)throw Error(K+"valueOf disallowed");return Y(e,e.e<=r.NE||e.e>=r.PE,!0)};const et=async({APT:e})=>{const r=Ge();return{enhanced:await(await fetch(r.origin_address+"/math/APT_to_Octas",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({APT:e})})).json()}},tt="0123456789",rt=e=>{if(typeof e!="string"||e.length===0)return"no";for(let r=0;r<e.length;r++)if(tt.includes(e[r])!==!0)return"no";return"yes"};function Me(e){let r,t,n,s=`<div class="alert-message" style="text-align: center; "><p><b>Caution</b>, Please make sure &quot;<b>Actual Amount</b>&quot; is the intended amount.
				</p><p>It&#39;s calculated from the number provided and is the amount used.</p></div>`,a,l,o,c,i="APT",_,u="Octas",E,g,B,h,f,N,J="Sci Note Estimate",L,O,S,Z=e[5](e[0])+"",ee,fe,j,we="Octas",ue,U,he,k,X,be="<b>Actual Amount</b>",pe,V,D,G=Se(e[0])+"",te,me,q,xe="Octas",_e,y,Q,ge,Ee;return y=new Ze({props:{text:e[3].problem}}),{c(){r=v("div"),t=v("label"),n=v("aside"),n.innerHTML=s,a=I(),l=v("div"),o=v("select"),c=v("option"),c.textContent=i,_=v("option"),_.textContent=u,E=I(),g=v("input"),B=I(),h=v("div"),f=v("span"),N=v("span"),N.textContent=J,L=I(),O=v("div"),S=v("span"),ee=Oe(Z),fe=I(),j=v("span"),j.textContent=we,ue=I(),U=v("div"),he=I(),k=v("span"),X=v("span"),X.innerHTML=be,pe=I(),V=v("div"),D=v("span"),te=Oe(G),me=I(),q=v("span"),q.textContent=xe,_e=I(),Xe(y.$$.fragment),this.h()},l(b){r=d(b,"DIV",{});var P=C(r);t=d(P,"LABEL",{class:!0});var R=C(t);n=d(R,"ASIDE",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-20bl5"&&(n.innerHTML=s),a=T(R),l=d(R,"DIV",{class:!0,style:!0});var re=C(l);o=d(re,"SELECT",{currency_chooser:!0,class:!0,style:!0});var ve=C(o);c=d(ve,"OPTION",{"data-svelte-h":!0}),z(c)!=="svelte-1x28i8j"&&(c.textContent=i),_=d(ve,"OPTION",{"data-svelte-h":!0}),z(_)!=="svelte-1tgaogs"&&(_.textContent=u),ve.forEach(A),E=T(re),g=d(re,"INPUT",{amount_field:!0,style:!0,class:!0,type:!0,placeholder:!0}),re.forEach(A),R.forEach(A),B=T(P),h=d(P,"DIV",{style:!0});var W=C(h);f=d(W,"SPAN",{class:!0,style:!0});var ne=C(f);N=d(ne,"SPAN",{"data-svelte-h":!0}),z(N)!=="svelte-1oo504f"&&(N.textContent=J),L=T(ne),O=d(ne,"DIV",{});var se=C(O);S=d(se,"SPAN",{style:!0});var Pe=C(S);ee=Ce(Pe,Z),Pe.forEach(A),fe=T(se),j=d(se,"SPAN",{class:!0,style:!0,"data-svelte-h":!0}),z(j)!=="svelte-8793rd"&&(j.textContent=we),se.forEach(A),ne.forEach(A),ue=T(W),U=d(W,"DIV",{style:!0}),C(U).forEach(A),he=T(W),k=d(W,"SPAN",{class:!0,style:!0});var oe=C(k);X=d(oe,"SPAN",{"data-svelte-h":!0}),z(X)!=="svelte-1pvhq2p"&&(X.innerHTML=be),pe=T(oe),V=d(oe,"DIV",{});var ie=C(V);D=d(ie,"SPAN",{monitor:!0,style:!0});var Ae=C(D);te=Ce(Ae,G),Ae.forEach(A),me=T(ie),q=d(ie,"SPAN",{class:!0,style:!0,"data-svelte-h":!0}),z(q)!=="svelte-8793rd"&&(q.textContent=xe),ie.forEach(A),oe.forEach(A),W.forEach(A),_e=T(P),Qe(y.$$.fragment,P),P.forEach(A),this.h()},h(){x(n,"class","alert variant-filled-warning"),c.__value="APT",ae(c,c.__value),_.__value="Octas",ae(_,_.__value),x(o,"currency_chooser",""),x(o,"class","input-group-shim"),w(o,"width","100px"),w(o,"border-top-left-radius","20px"),w(o,"border-bottom-left-radius","20px"),w(o,"text-align","center"),e[1]===void 0&&Ve(()=>e[9].call(o)),x(g,"amount_field",""),w(g,"padding","10px"),w(g,"border","0"),x(g,"class","input"),x(g,"type","text"),x(g,"placeholder","Amount of Octas"),x(l,"class","input-group input-group-divider grid-cols-[auto_1fr_auto]"),w(l,"padding","2px"),x(t,"class","label"),w(S,"font-size","1em"),w(S,"white-space","preserve"),w(S,"word-wrap","anywhere"),w(S,"margin","4px"),x(j,"class","badge variant-filled-surface"),w(j,"font-size","1.1em"),x(f,"class","badge variant-soft"),x(f,"style","// display: grid; // grid-template-columns: repeat(auto-fit, minmax(6cm, 1fr)); // gap: 4px; // flex: 1 1 50%; display: flex; flex-wrap: wrap; justify-content: space-between; position: relative; font-size: 1.2em; white-space: break-spaces; padding: 0.25cm 0.5cm; "),w(U,"height","6px"),w(U,"width","6px"),x(D,"monitor","actual amount of octas"),w(D,"font-size","1em"),w(D,"white-space","preserve"),w(D,"word-wrap","anywhere"),w(D,"margin","4px"),x(q,"class","badge variant-filled-surface"),w(q,"font-size","1.1em"),x(k,"class","badge variant-soft"),x(k,"style","// display: grid; // grid-template-columns: repeat(auto-fit, minmax(6cm, 1fr)); // gap: 4px; // flex: 1 1 50%; display: flex; flex-wrap: wrap; justify-content: space-between; position: relative; font-size: 1.2em; white-space: break-spaces; padding: 0.25cm 0.5cm; "),x(h,"style","// display: flex; // flex-wrap: wrap; // justify-content: space-between; // flex-direction: wrap; width: 100%; margin: 4px 0; ")},m(b,P){je(b,r,P),p(r,t),p(t,n),p(t,a),p(t,l),p(l,o),p(o,c),p(o,_),De(o,e[1],!0),p(l,E),p(l,g),ae(g,e[2]),p(r,B),p(r,h),p(h,f),p(f,N),p(f,L),p(f,O),p(O,S),p(S,ee),p(O,fe),p(O,j),p(h,ue),p(h,U),p(h,he),p(h,k),p(k,X),p(k,pe),p(k,V),p(V,D),p(D,te),p(V,me),p(V,q),p(r,_e),We(y,r,null),Q=!0,ge||(Ee=[Ie(o,"change",e[9]),Ie(g,"input",e[10])],ge=!0)},p(b,P){P&2&&De(o,b[1]),P&4&&g.value!==b[2]&&ae(g,b[2]),(!Q||P&1)&&Z!==(Z=b[5](b[0])+"")&&Te(ee,Z),(!Q||P&1)&&G!==(G=Se(b[0])+"")&&Te(te,G);const R={};P&8&&(R.text=b[3].problem),y.$set(R)},i(b){Q||(ce(y.$$.fragment,b),Q=!0)},o(b){de(y.$$.fragment,b),Q=!1},d(b){b&&A(r),Ye(y),ge=!1,Re(Ee)}}}function nt(e){let r,t,n=e[4]==="yes"&&Me(e);return{c(){n&&n.c(),r=Ne()},l(s){n&&n.l(s),r=Ne()},m(s,a){n&&n.m(s,a),je(s,r,a),t=!0},p(s,[a]){s[4]==="yes"?n?(n.p(s,a),a&16&&ce(n,1)):(n=Me(s),n.c(),ce(n,1),n.m(r.parentNode,r)):n&&(Je(),de(n,1,1,()=>{n=null}),Ue())},i(s){t||(ce(n),t=!0)},o(s){de(n),t=!1},d(s){s&&A(r),n&&n.d(s)}}}function st(e,r,t){let n,s,a,{on_change:l=()=>{}}=r,{verify:o=()=>{}}=r,{after_mount:c=()=>{}}=r,i={sci_note_estimate_of_Octas:"",problem:""};const _=async()=>{try{const{enhanced:f}=await et({APT:n.toString()});if(f.victory==="yes"){t(0,a=f.Octas),l({effects:i,actual_amount_of_Octas:a,amount:n,currency:s});return}else Ke(f,"note")?t(3,i.problem=f.note,i):t(3,i.problem=o({merch,effects:i}),i)}catch(f){t(3,i.problem=f.message,i)}t(0,a=""),l({effects:i,actual_amount_of_Octas:a,amount:n,currency:s})},u=async()=>{t(3,i.problem="",i),t(0,a=""),await new Promise(f=>{setTimeout(()=>{f()},200)});try{if(s==="APT"){await _();return}if(s==="Octas"){const f=n.toString();if(rt(f)!=="yes"){t(3,i.problem="Octas needs to be a natural number. (1, 2, 3, 4, 5, ...)",i);return}t(0,a=f),l({effects:i,actual_amount_of_Octas:a,amount:n,currency:s});return}t(3,i.problem=`Currency "${s}" was not accounted for.`,i);return}catch(f){t(3,i.problem=f.message,i)}l({effects:i,actual_amount_of_Octas:a,amount:n,currency:s})};let E="no";Be(async()=>{await c(),u(),t(4,E="yes")}),Le(()=>{});const g=()=>{try{let f=parseFloat(a).toExponential();return f==="NaN"?"":f}catch(f){console.error(f)}return""};function B(){s=ze(this),t(1,s)}function h(){n=this.value,t(2,n)}return e.$$set=f=>{"on_change"in f&&t(6,l=f.on_change),"verify"in f&&t(7,o=f.verify),"after_mount"in f&&t(8,c=f.after_mount)},e.$$.update=()=>{e.$$.dirty&4&&u(),e.$$.dirty&2&&u(),e.$$.dirty&1&&g()},t(2,n="1"),t(1,s="APT"),t(0,a=""),[a,s,n,i,E,g,l,o,c,B,h]}class pt extends He{constructor(r){super(),Fe(this,r,st,nt,ye,{on_change:6,verify:7,after_mount:8})}}export{pt as T};
//# sourceMappingURL=Trinket.C8FSbdkC.js.map
