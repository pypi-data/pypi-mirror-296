{"version":3,"file":"index.BfGYMDwM.js","sources":["../../../../../../src/lib/taverns/loop/index.js"],"sourcesContent":["\n\n/*\n\timport { loop } from '$lib/taverns/loop'\n\t \n\tconst loop_1 = loop ({\n\t\twait: 2000,\n\t\taction: () => {\n\t\t \n\t\t}\n\t})\n\t\n\tloop_1.play ()\n\tloop_1.stop ()\n\tloop_1.play ()\n*/\n\n/*\n\timport { loop } from '$lib/taverns/loop'\n\t\n\tconst loop_1 = loop ({\n\t\twait: 2000,\n\t\twait_for_response: \"yes\",\n\t\taction: async () => {\n\t\t \n\t\t}\n\t})\n\t\n\tloop_1.play ()\n\tloop_1.stop ()\n\tloop_1.play ()\n*/\n\n\nexport const loop = ({\n\twait,\n\taction,\n\twait_for_response = \"no\"\n}) => {\n\tlet playing = \"no\"\n\t\n\tlet timeout = \"\"\n\tconst the_loop = async () => {\n\t\tif (playing === \"yes\") {\n\t\t\tif (wait_for_response === \"yes\") {\n\t\t\t\ttry {\n\t\t\t\t\tawait action ();\n\t\t\t\t}\n\t\t\t\tcatch (exception) {\n\t\t\t\t\tconsole.error (exception)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsetTimeout (() => {\n\t\t\t\t\taction ();\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\t\n\t\tawait new Promise (resolve => {\n\t\t\ttimeout = setTimeout (() => {\n\t\t\t\tresolve ()\n\t\t\t}, wait)\n\t\t})\n\t\t\n\t\tif (playing === \"yes\") {\n\t\t\tclearTimeout (timeout)\n\t\t\tthe_loop ();\n\t\t}\n\t}\n\t\n\treturn {\n\t\tplay: () => {\n\t\t\tif (playing === \"no\") {\n\t\t\t\tplaying = \"yes\"\n\t\t\t\tthe_loop ()\n\t\t\t}\n\t\t},\n\t\t/*pause: () => {\n\t\t\tclearTimeout (timeout)\n\t\t\tplaying = \"no\"\n\t\t},*/\n\t\tstop: () => {\n\t\t\tclearTimeout (timeout)\n\t\t\tplaying = \"no\"\n\t\t}\n\t}\n}"],"names":["loop","wait","action","wait_for_response","playing","timeout","the_loop","exception","resolve"],"mappings":"AAkCY,MAACA,EAAO,CAAC,CACpB,KAAAC,EACA,OAAAC,EACA,kBAAAC,EAAoB,IACrB,IAAM,CACL,IAAIC,EAAU,KAEVC,EAAU,GACd,MAAMC,EAAW,SAAY,CAC5B,GAAIF,IAAY,MACf,GAAID,IAAsB,MACzB,GAAI,CACH,MAAMD,EAAM,CACZ,OACMK,EAAW,CACjB,QAAQ,MAAOA,CAAS,CACxB,MAGD,WAAY,IAAM,CACjBL,GACL,CAAK,EAIH,MAAM,IAAI,QAASM,GAAW,CAC7BH,EAAU,WAAY,IAAM,CAC3BG,EAAU,CACV,EAAEP,CAAI,CACV,CAAG,EAEGG,IAAY,QACf,aAAcC,CAAO,EACrBC,IAED,EAED,MAAO,CACN,KAAM,IAAM,CACPF,IAAY,OACfA,EAAU,MACVE,EAAW,EAEZ,EAKD,KAAM,IAAM,CACX,aAAcD,CAAO,EACrBD,EAAU,IACV,CACD,CACF"}