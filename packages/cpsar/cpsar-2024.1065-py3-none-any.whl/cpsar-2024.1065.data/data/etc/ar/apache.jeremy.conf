#MDomain ar-bd-test.ehorx.com
<VirtualHost *:443>
    ServerName ar-bd-test.ehorx.com
    ServerSignature Off
    CustomLog /var/log/apache2/ar-bd-test.ehorx.com-access.log combined
    ErrorLog /var/log/apache2/error.log

    Include /etc/apache2/ssl.conf
    #SSLEngine On
    RewriteEngine On
    RewriteRule ^/ppayment$ /ppayment/ [R,L]
    RewriteRule ^/apps/(.*)$ /$1 [R,L]

    # Authentication
    <Location />
        AuthType Basic
        AuthName "Blue Diamond Backend (Jeremy Development)"
        AuthUserFile "/usr/local/srv/bd/files/ar/htpasswd"

        AuthBasicProvider wsgi
        WSGIAuthUserScript /usr/local/srv/bd/etc/ar/auth.wsgi application-group=test.be.bluediamondrx.com
        Require valid-user

    </Location>

    # Resources
    Alias /css /usr/local/srv/bd/www/ar/css
    Alias /doc /usr/local/srv/bd/doc/ar
    Alias /html /usr/local/srv/bd/www/ar/html
    Alias /images /usr/local/srv/bd/www/ar/images
    Alias /js /usr/local/srv/bd/www/ar/js
    Alias /repo /usr/local/srv/bd/www/repo

    # WSGI
    WSGIScriptAlias / /usr/local/srv/bd/etc/ar/jeremy.wsgi
    WSGIDaemonProcess test.be.bluediamondrx.com threads=1 processes=2 \
        display-name=test-ar.wsgi user=xhandler group=staff 
    WSGIProcessGroup test.be.bluediamondrx.com
</VirtualHost>

# vim: filetype=apache
