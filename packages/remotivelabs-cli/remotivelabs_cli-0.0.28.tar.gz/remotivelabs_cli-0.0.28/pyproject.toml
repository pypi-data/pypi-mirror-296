[tool.poetry]
name = "remotivelabs-cli"
version = "0.0.28"
description = "CLI for operating RemotiveCloud and RemotiveBroker"
authors = ["Johan Rask <johan.rask@remotivelabs.com>"]
readme = "README.md"
packages = [{include = "cli"}]

[tool.poetry.dependencies]
trogon = ">=0.5.0"
python = ">=3.8,<3.12"
typer = "~=0.9.0"
remotivelabs-broker = "~=0.1.17"
rich = "~=13.7.0"
pyjwt = "~=2.6"
zeroconf = "~=0.127.0"
websocket-client ="~=1.6"
plotext = "~=5.2"
python-socketio = ">=4.6.1"
python-can = ">=4.3.1"
grpc-stubs = ">=1.53.0.5"
mypy-protobuf = ">=3.0.0"
types-requests = "^2.32.0.20240622"
[tool.poetry.scripts]
remotive = "cli.remotive:app"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.poetry.group.test]  # This part can be left out

[tool.poetry.group.test.dependencies]
pytest = "^8.0.0"

[tool.poetry.group.lint.dependencies]
pytest = "^8.0.0"
mypy = "^1.8.0" 
pylint = "^3.2.5"
pylint-protobuf = "^0.22.0"
ruff = "^0.1.1" 


[tool.pytest.ini_options]
markers = [
    "itests: run tests with custom flag"
]
minversion = "8.0"
#addopts = "-ra -q"
testpaths = [
    "tests/*"
]


[tool.ruff]
line-length = 140
indent-width = 4
exclude = [
    '.bzr',
    '.direnv',
    '.eggs',
    '.git',
    '.git-rewrite',
    '.hg',
    '.ipynb_checkpoints',
    '.mypy_cache',
    '.nox',
    '.pants.d',
    '.pyenv',
    '.pytest_cache',
    '.pytype',
    '.ruff_cache',
    '.svn',
    '.tox',
    '.venv',
    '.vscode',
    '__pypackages__',
    '_build',
    'buck-out',
    'build',
    'dist',
    'node_modules',
    'site-packages',
    'venv',
    'deps',
    'binaries',
    '__pycache__'
]
[tool.ruff.lint]
select = ['C901', 'E', 'W', 'F', 'RET505', 'I001', 'B034', 'EXE001', 'N', 'UP032', 'FA']
ignore = []
mccabe = { max-complexity = 14 }

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false

[tool.pylint]
ignore=[
    '.bzr',
    '.direnv',
    '.eggs',
    '.git',
    '.git-rewrite',
    '.hg',
    '.ipynb_checkpoints',
    '.mypy_cache',
    '.nox',
    '.pants.d',
    '.pyenv',
    '.pytest_cache',
    '.pytype',
    '.ruff_cache',
    '.svn',
    '.tox',
    '.venv',
    '.vscode',
    '__pypackages__',
    '_build',
    'buck-out',
    'build',
    'dist',
    'node_modules',
    'site-packages',
    'venv',
    'deps',
    'binaries',
    '__pycache__'
]
recursive=true
load-plugins = ["pylint_protobuf"]

[tool.pylint.format]
max-line-length=140
max-module-lines=1000

[tool.pylint.messages_control]
disable=['wrong-import-order',
        'missing-module-docstring',
        'missing-class-docstring',
        'missing-function-docstring',
        'duplicate-code']

[tool.mypy]
strict = true
allow_untyped_calls = true
check_untyped_defs = true
warn_return_any = true
warn_unused_ignores = true
show_error_codes = true

[[tool.mypy.overrides]]
module = "someip.*"
ignore_missing_imports = true