!function(){"use strict";var t={579:function(t){t.exports=jquery}},e={};function n(s){var o=e[s];if(void 0!==o)return o.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,n),r.exports}!function(){class t{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.name=t,this.src=e.src,this.css=e.css,this.callbacks=[],e.callback&&this.callbacks.push({callback:e.callback,context:e.context||"body"}),this.async=void 0===e.async||e.async,this.loaded=n}load(){return new Promise(((t,e)=>{if(this.loaded)t();else{const n=[];this.src&&n.push(MyAMS.core.getScript(this.src)),this.css&&n.push(MyAMS.core.getCSS(this.css,`${this.name}_css`)),$.when.apply($,n).then((()=>{this.loaded=!0,t()}),e)}}))}run(t){const e=[];for(const n of this.callbacks)"string"==typeof n.callback&&(console.debug(`Resolving callback ${n.callback}`),n.callback=MyAMS.core.getFunctionByName(n.callback)||n.callback),e.push(n.callback(t,n.context));return Promise.all(e)}}const e=new class{constructor(){this.plugins=new Map}register(e,n){!n&&Object.prototype.hasOwnProperty.call(e,"name")&&(n=e.name);const s=this.plugins;if(s.has(n)){window.console&&console.debug&&console.debug(`Plug-in ${n} is already registered!`);const t=s.get(n);let o=!0;for(const n of t.callbacks)if(n.callback===e.callback&&n.context===e.context){o=!1;break}return o&&t.callbacks.push({callback:e.callback,context:e.context||"body"}),t}return"string"==typeof e&&(e=MyAMS.core.getFunctionByName(e)),"function"==typeof e?s.set(n,new t(n,{callback:e},!0)):"object"==typeof e&&s.set(n,new t(n,e,!(e.src||e.css))),s.get(n)}load(t){const e=[],n=[];$("[data-ams-plugins]",t).each(((t,s)=>{const o=$(s),r=o.data("ams-plugins");let i,c;if("string"==typeof r)for(const t of r.split(/[\s,;]+/)){const s=t.toLowerCase();c={src:o.data(`ams-plugin-${s}-src`),css:o.data(`ams-plugin-${s}-css`),callback:o.data(`ams-plugin-${s}-callback`),context:o,async:o.data(`ams-plugin-${s}-async`)},i=this.register(c,t),i.loaded||(!1===c.async?n.push(i.load()):e.push(i.load()))}else for(c of $.isArray(r)?r:[r])$.extend(c,{context:o}),i=this.register(c),i.loaded||(!1===i.async?n.push(i.load()):e.push(i.load()))}));let s=$.when.apply($,e);for(const t of n)s=s.done((()=>{}));return s}run(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=new Set;$("[data-ams-plugins-disabled]",t).each(((t,e)=>{const s=$(e).data("ams-plugins-disabled").split(/[\s,;]+/);for(const t of s)n.add(t)}));const s=this.plugins;if(e)for(const n of e)s.has(n)&&s.get(n).run(t);else for(const[e,o]of s.entries())n.has(e)||o.run(t)}},s={plugins:e,initElement:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#content";return MyAMS.core.executeFunctionByName(MyAMS.config.initData,window,t),e.load(t)},register:function(t,n,s){return e.register(t,n,s)},run:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.run(t,n)}};function o(t){let e=[];const n=t.data("ams-modules");if("string"==typeof n)e=e.concat(n.trim().split(/[\s,;]+/));else if(n)for(const[t,s]of Object.entries(n)){const n={};n[t]=s,e.push(n)}return $("[data-ams-modules]",t).each(((t,n)=>{const s=$(n).data("ams-modules");if("string"==typeof s)e=e.concat(s.trim().split(/[\s,;]+/));else if(s)for(const[t,n]of Object.entries(s)){const s={};s[t]=n,e.push(s)}})),[...new Set(e)]}function r(t,e){if(!t)return;if("string"!=typeof t)return t;const n=t.split(".");e=null==e?window:e;for(const t of n)try{e=e[t]}catch(t){return}return e}function i(t,e){if(null==t)return;if("function"==typeof t)return t;if("string"!=typeof t)return;const n=t.split("."),s=n.pop();e=null==e?window:e;for(const t of n)try{e=e[t]}catch(t){return}try{return e[s]}catch(t){return}}function c(t,e){const n=i(t,window);if("function"==typeof n){const t=Array.prototype.slice.call(arguments,2);return n.apply(e,t)}}function a(t){return t.replace(/{[^{}]*}/g,(t=>r(t.substr(1,t.length-2))))}window.jQuery||(window.$=window.jQuery=n(579));const l=/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()),u={modules:[],ajaxNav:!0,enableFastclick:!0,useSVGIcons:void 0!==window.FontAwesome&&"nest"===FontAwesome.config.autoReplaceSvg,menuSpeed:235,initPage:"MyAMS.core.initPage",initData:"MyAMS.core.initData",initContent:"MyAMS.core.initContent",clearContent:"MyAMS.core.clearContent",useRegistry:!0,alertsContainerClass:"toast-wrapper",safeMethods:["GET","HEAD","OPTIONS","TRACE"],csrfCookieName:"csrf_token",csrfHeaderName:"X-CSRF-Token",enableTooltips:!0,enableHtmlTooltips:!0,warnOnFormChange:!0,formChangeCallback:null,isMobile:l,device:l?"mobile":"desktop"},f={getObject:r,getFunctionByName:i,executeFunctionByName:c,getSource:a,getScript:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((n,s)=>{const o={dataType:"script",url:d.core.getSource(t),cache:d.env.devmode,async:!0},r=$.extend({},o,e);$.ajax(r).then((()=>{n(t)}),((t,e,n)=>{s(n)}))}))},getCSS:function(t,e){return new Promise((n=>{const s=$("HEAD");let o=$(`style[data-ams-id="${e}"]`,s);if(0===o.length){o=$("<style>").attr("data-ams-id",e).text(`@import "${a(t)}";`).appendTo(s);const r=setInterval((()=>{try{o[0].sheet.cssRules,clearInterval(r),n(!0)}catch(t){}}),10)}else n(!1)}))},getQueryVar:function(t,e){if("string"!=typeof t||t.indexOf("?")<0)return;t.endsWith("&")||(t+="&");const n=new RegExp(`.*?[&\\?]${e}=(.*?)&.*`),s=t.replace(n,"$1");return s===t?null:s},generateId:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+t()+t()},generateUUID:function(){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))},switchIcon:function(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fa";if("string"==typeof t&&(t=$(t)),d.config.useSVGIcons){const e=FontAwesome.findIconDefinition({iconName:n,prefix:s});e&&t.html(FontAwesome.icon(e).html)}else t.removeClass(`fa-${e}`).addClass(`fa-${n}`)},initPage:function(){return d.require("i18n").then((()=>{d.dom={page:$("html"),root:$("body"),nav:$("nav"),main:$("#main"),leftPanel:$("#left-panel"),shortcuts:$("#shortcuts")},d.theme=function(){let t=d.theme;if(!t){const e=$('link[href*="/myams.css"], link[href*="/emerald.css"], link[href*="/darkmode.css"], link[href*="/lightmode.css"]');t=e.length>0?/.*\/([a-z]+).css/.exec(e.attr("href"))[1]:"unknown"}return t}(),c(d.config.initData,window,d.dom.root);const t=o(d.dom.root);d.require(...t).then((()=>{for(const t of d.config.modules)c(`MyAMS.${t}.init`);c(d.dom.page.data("ams-init-content")||d.config.initContent)}))}))},initData:function(t){$("[data-ams-data]",t).each(((t,e)=>{const n=$(e),s=n.data("ams-data");if(s)for(const t in s){if(!Object.prototype.hasOwnProperty.call(s,t))continue;let e=s[t];"string"!=typeof e&&(e=JSON.stringify(e)),n.attr(`data-${t}`,e)}n.removeAttr("data-ams-data")}))},initContent:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;function e(){for(const e of d.config.modules)c(`MyAMS.${e}.initElement`,document,t)}return null===t&&(t=$("body")),t=$(t),new Promise(((n,s)=>{c(d.config.initData,window,t);const r=o(t);return d.require(...r).then((()=>{t.trigger("before-init.ams.content"),d.config.useRegistry&&!t.data("ams-disable-registry")?d.registry.initElement(t).then((()=>{e()})).then((()=>{d.registry.run(t),t.trigger("after-init.ams.content")})).then(n):(e(),n())}),(()=>{s("Missing MyAMS modules!")}))}))},clearContent:function(t){return"string"==typeof t&&(t=$(t)),new Promise(((e,n)=>{const s={veto:!1};$(document).trigger("clear.ams.content",[s,t]),s.veto?e(!s.veto):d.require("events").then((()=>{$(d.events.getHandlers(t,"clear.ams.content")).each(((t,e)=>{if($(e).trigger("clear.ams.content",[s]),s.veto)return!1})),s.veto||($(d.events.getHandlers(t,"cleared.ams.content")).each(((t,e)=>{$(e).trigger("cleared.ams.content")})),$(document).trigger("cleared.ams.content",[t])),e(!s.veto)}),(()=>{n("Missing MyAMS.events module!")}))}))}},d={$:$,env:function(t){const e=t('script[src*="/myams.js"], script[src*="/myams-dev.js"], script[src*="/emerald.js"], script[src*="/emerald-dev.js"], script[src*="/darkmode.js"], script[src*="/darkmode-dev.js"], script[src*="/lightmode.js"], script[src*="/lightmode-dev.js"], script[src*="/myams-core.js"], script[src*="/myams-core-dev.js"], script[src*="/myams-mini.js"], script[src*="/myams-mini-dev.js"]').attr("src"),n=!e||e.indexOf("-dev.js")>=0;return{bundle:!e||e.indexOf("-core")<0,devmode:n,devext:n?"-dev":"",extext:n?"":".min",baseURL:e?e.substring(0,e.lastIndexOf("/")+1):"/"}}($),config:u,core:f,registry:s};window.MyAMS=d;var h=d;const p=MyAMS.$;function m(t,e){let n,s;"object"==typeof t?(n=t.src,s=t.css):n=t.startsWith("http://")||t.startsWith("https://")||t.endsWith(".js")?t:`${MyAMS.env.baseURL}mod-${t}${MyAMS.env.devext}.js`;const o=[MyAMS.core.getScript(n,{async:!0},console.error)];return s&&o.push(MyAMS.core.getCSS(s,`${e}_css`)),o}h.$.extend(h,{require:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Promise(((t,n)=>{const s=[],o=[],r=MyAMS.config.modules;for(const t of e)if("string"==typeof t)r.indexOf(t)<0&&(s.push(t),o.extendWith(m(t)));else if(p.isArray(t))for(const e of t)r.indexOf(e)<0&&(s.push(e),o.extendWith(m(e)));else for(const[e,n]of Object.entries(t))r.indexOf(e)<0&&(s.push(e),o.extendWith(m(n,e)));p.when.apply(p,o).then((()=>{for(const t of s)r.indexOf(t)<0&&(r.push(t),MyAMS.core.executeFunctionByName(`MyAMS.${t}.init`));t()}),(()=>{n(`Can't load requested modules (${s})!`)}))}))}}),!1!==h.$("html").data("ams-init")&&function(t){t.extend(String.prototype,{camelCase:function(){return this?this.replace(/-(.)/g,((t,e)=>e.toUpperCase())):this},deCase:function(){return this?this.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`)):this},initLowerCase:function(){return this?this.charAt(0).toLowerCase()+this.slice(1):this},unserialize:function(){if(!this)return this;const t=decodeURIComponent(this).split("&"),e={};for(const n of t){const[t,s]=n.split("=",2);e[t]=s}return e}}),t.extend(Array.prototype,{extendWith:function(t){for(const e of t)this.push(e)}}),t.extend(t,{extendPrefix:function(t,e,n){for(var s=arguments.length,o=new Array(s>3?s-3:0),r=3;r<s;r++)o[r-3]=arguments[r];for(const s of o)for(const[o,r]of Object.entries(s))o.startsWith(e)&&(t[o.substring(e.length).initLowerCase()]=null===n?r:n(r));return t},extendOnly:function(t,e){for(var n=arguments.length,s=new Array(n>2?n-2:0),o=2;o<n;o++)s[o-2]=arguments[o];for(const n of s)for(const[s,o]of Object.entries(n))Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=null===e?o:e(o));return t}}),t.fn.extend({exists:function(){return t(this).length>0},objectOrParentWithClass:function(t){return this.hasClass(t)?this:this.parents(`.${t}`)},listattr:function(e){const n=[];return this.each(((s,o)=>{n.push(t(o).attr(e))})),n},style:function(t,e,n){let s=this;return this.each(((o,r)=>{if(void 0===r)return!1;const i=r.style;return void 0===t?(s=i,!1):void 0===e?(s=i.getPropertyValue(t),!1):(n=void 0!==n?n:"",void i.setProperty(t,e,n))})),s},removeClassPrefix:function(e){return this.each((function(n,s){const o=s.className.split(/\s+/).map((t=>t.startsWith(e)?"":t));s.className=t.trim(o.join(" "))})),this}}),t.expr[":"].hasvalue=function(e,n,s){return""!==t(e).val()},t.expr[":"].econtains=function(e,n,s){return(e.textContent||e.innerText||t(e).text()||"").toLowerCase()===s[3].toLowerCase()},t.expr[":"].withtext=function(e,n,s){return(e.textContent||e.innerText||t(e).text()||"")===s[3]},t.expr[":"].parents=function(e,n,s){return t(e).parents(s[3]).length>0},t(document).ready((()=>{const e=t("html");e.removeClass("no-js").addClass("js"),d.core.executeFunctionByName(e.data("ams-init-page")||d.config.initPage)}))}(h.$)}()}();