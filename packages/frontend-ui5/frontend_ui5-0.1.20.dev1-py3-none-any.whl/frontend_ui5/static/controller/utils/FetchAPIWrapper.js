"use strict";sap.ui.define(["sap/base/Log","./Cookies"],function(e,t){"use strict";const n=t["getCSRFCookie"];class i{CSRFToken="";logger=(()=>e.getLogger("FetchAPIWrapper"))();constructor(t){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";this.logger.setLevel(e.Level.INFO);this.domain=n?n:window.location.origin;this.apiEndpoint=t}call(e,t){let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};let o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let s="";if(o&&typeof i==="object"){s=this.serialize(i)}else if(o&&typeof i==="string"){this.logger.warning("Can't serialize data of type string!")}else{s=typeof i==="string"?i:JSON.stringify(i)}if(["post","delete","patch","put"].includes(e)){this.CSRFToken=n();if(!this.CSRFToken){this.logger.warning("No CSRF token found!")}}return new Promise((n,i)=>{this[e](t,s,o).then(e=>{if(e.ok){n(e)}else{i(e)}}).catch(e=>{i(e)})})}delete(e,t){return fetch(this.domain+this.apiEndpoint+e,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":this.CSRFToken},body:t})}get(e){return fetch(this.domain+this.apiEndpoint+e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}})}patch(e,t){return fetch(this.domain+this.apiEndpoint+e,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":this.CSRFToken},body:t})}post(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return fetch(this.domain+this.apiEndpoint+e,{method:"POST",headers:{"Content-Type":n?"application/x-www-form-urlencoded":"application/json",Accept:"application/json","X-CSRFToken":this.CSRFToken},body:t})}put(e,t){return fetch(this.domain+this.apiEndpoint+e,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":this.CSRFToken},body:t})}serialize(e){return Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&")}}return i});
//# sourceMappingURL=FetchAPIWrapper.js.map