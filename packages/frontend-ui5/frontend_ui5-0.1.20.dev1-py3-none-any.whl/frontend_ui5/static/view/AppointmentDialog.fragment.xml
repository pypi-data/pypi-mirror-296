<core:FragmentDefinition
  xmlns:layout="sap.ui.layout"
  xmlns="sap.m"
  xmlns:f="sap.ui.layout.form"
  xmlns:core="sap.ui.core"
>
  <Dialog
    id="idAppointmentDialog"
    busyIndicatorDelay="100"
    showHeader="false"
  >
    <Toolbar>
      <Title
        class="sapUiTinyMargin"
        text="{i18n>calendar.appointment}"
      />
      <ToolbarSpacer />
      <Button
        class="sapUiTinyMargin"
        icon="sap-icon://decline"
        press="onCancelDialog"
        tooltip="{i18n>close}"
        type="Transparent"
      />
    </Toolbar>
    <buttons>
      <Button
        text="{i18n>save}"
        type="Emphasized"
        icon="sap-icon://save"
        press="onSaveBtnPress"
        enabled="{parts:
                    [
                        'frontend>/appointmentForm/date',
                        'frontend>/appointmentForm/startTime',
                        'frontend>/appointmentForm/endTime',
                        'frontend>/appointmentForm/participants'
                    ],
                    formatter: '.validateCalendarItemForm'
                }"
      />
      <Button
        text="{i18n>delete}"
        icon="sap-icon://delete"
        press="onDeleteDialog"
        type="Ghost"
        visible="{= ${frontend>/appointmentForm/id}? true : false }"
      />
    </buttons>
    <f:SimpleForm
      id="idAppointmentEditForm"
      layout="ResponsiveGridLayout"
      singleContainerFullSize="false"
    >
      <Label
        text="{i18n>calendar.itemDialog.subject}"
        labelFor="idSubjectInput"
      />
      <Input
        id="idSubjectInput"
        showClearIcon="true"
        showSuggestion="true"
        suggestionItems="{ path: 'frontend>/appointmentTitleSuggestions' }"
        value="{frontend>/appointmentForm/title}"
        valueLiveUpdate="true"
      >
        <suggestionItems>
          <core:Item text="{frontend>}" />
        </suggestionItems>
      </Input>
      <Label
        text="{i18n>calendar.itemDialog.participants}"
        labelFor="idParticipantsInput"
      />
      <Input
        editable="true"
        id="idParticipantsInput"
        required="true"
        showValueHelp="true"
        value="{path: 'frontend>/appointmentForm/participants', formatter: '.idsToPersonNames'}"
        valueHelpOnly="true"
        valueHelpRequest=".openPersonDialog"
      />
      <Label
        text="{i18n>calendar.itemDialog.date}"
        labelFor="idDateInput"
      />
      <DatePicker
        id="idDateInput"
        required="true"
        value="{frontend>/appointmentForm/date}"
        placeholder=" "
        valueFormat="yyyy-MM-dd"
      />
      <Label
        text="{i18n>calendar.itemDialog.from}"
        labelFor="idStartTimePicker"
      />
      <TimePicker
        id="idStartTimePicker"
        minutesStep="5"
        displayFormat="HH:mm"
        valueFormat="HH:mm"
        placeholder="--:--"
        value="{frontend>/appointmentForm/startTime}"
        required="true"
      />
      <Label
        text="{i18n>calendar.itemDialog.to}"
        labelFor="idEndTimePicker"
      />
      <TimePicker
        id="idEndTimePicker"
        minutesStep="5"
        displayFormat="HH:mm"
        valueFormat="HH:mm"
        value="{frontend>/appointmentForm/endTime}"
        placeholder="--:--"
        required="true"
      />
    </f:SimpleForm>
  </Dialog>
</core:FragmentDefinition>
