"use strict";sap.ui.define(["demo/spa/controller/SignUp.controller","demo/spa/controller/utils/Cookies","demo/spa/controller/utils/FetchAPIWrapper","demo/spa/controller/utils/Misc","demo/spa/controller/utils/MockConnector","sap/base/Log","sap/ui/test/Opa5","sap/ui/test/opaQunit","./pages/App.page"],function(e,t,n,i,s,o,a,r,u){"use strict";function g(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const l=g(e);const d=t["getCSRFCookie"];const p=g(n);const c=i["getResourceRoot"];const h=g(s);const S=g(u);const m=o.getLogger("AppJourney");const U="/test-results";const T=window.location.search.includes("e2eTest=true");const f=new S;const I=new p("/ui5");m.setLevel(o.Level.INFO);let w="UNKNOWN";N();E("LANG","en");h.deferResponse=false;QUnit.module("ToolPage Basics");f.iStartMyUIComponent({componentConfig:{name:"demo.spa"},hash:""});r("User Action Sheet Test",function(){f.iPressTheElement("idUserButton");f.iShouldSeeTheUserActionSheet();f.iPressTheElement("idHomeNavListItem");f.theUserActionSheetShouldNotExist()});QUnit.module("Authentication Basics");r("Login Test",function(){if(!d()){E("csrftoken","dummy")}a.getHashChanger().setHash("sign-in");f.iShouldSeeTheDialogWithId("idSignInDialog",f.signInViewName);f.iShouldSeeAnDisabledElement("idSignInButton",f.signInViewName);f.iSetTheInputFieldToValue("idSignInUsernameInput","admin",f.signInViewName);f.iSetTheInputFieldToValue("idSignInPasswordInput","this-is-an-integration-test",f.signInViewName);f.iShouldSeeAnEnabledElement("idSignInButton",f.signInViewName)});r("Sign Up Test - Failed Signup",function(){l.setInitialSignUpData({username:"test-user",email:"tester@abc.de",password:"this-is-an-integration-test",password_confirmation:"this-is-an-integration-test",product_key:"INVALID_KEY"});a.getHashChanger().setHash("sign-up");f.iShouldSeeTheDialogWithId("idSignUpDialog",f.signUpViewName);f.iShouldSeeAnEnabledElement("idSignUpButton",f.signUpViewName);f.iPressTheElement("idSignUpButton",f.signUpViewName);if(!T){h.nextStatusCodes.push(400)}f.iShouldSeeAnErrorMessageBox();f.iCanDestroyTheErrorMessageBox()});r("Sign Up Test - Successful Signup",function(){l.setInitialSignUpData({username:"test-user",email:"tester@abc.de",password:"this-is-an-integration-test",password_confirmation:"this-is-an-integration-test",product_key:"VALID_KEY"});a.getHashChanger().setHash("sign-up");f.iShouldSeeTheDialogWithId("idSignUpDialog",f.signUpViewName);f.iShouldSeeAnEnabledElement("idSignUpButton",f.signUpViewName);f.iPressTheElement("idSignUpButton",f.signUpViewName);f.iShouldNotSeeAnErrorMessageBox()});r("Sign Up Test - Failed Signup - Used Product Key twice",function(){l.setInitialSignUpData({username:"test-user-2",email:"tester2@abc.de",password:"this-is-an-integration-test",password_confirmation:"this-is-an-integration-test",product_key:"VALID_KEY"});setTimeout(()=>a.getHashChanger().setHash(""),100);setTimeout(()=>a.getHashChanger().setHash("sign-up"),250);f.iShouldSeeTheDialogWithId("idSignUpDialog",f.signUpViewName);f.iShouldSeeAnEnabledElement("idSignUpButton",f.signUpViewName);f.iPressTheElement("idSignUpButton",f.signUpViewName);if(!T){h.nextStatusCodes.push(400)}f.iShouldSeeAnErrorMessageBox();f.iCanDestroyTheErrorMessageBox()});QUnit.module("Finalize Test");r("Tear Down UI Component",function(){f.iAssertTrueIsTrue();f.iTeardownMyUIComponent();f.iRestoreBodyStyles()});QUnit.done(function(e){const t={...e,version:w};m.info("Test results: "+JSON.stringify(t));if(T){I.call("post",U,{...e,version:w},true).catch(e=>{m.error(String(e))})}});function E(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"true";const n=new Date;n.setTime(n.getTime()+3e4);const i=e+"="+t+"; expires="+n.toUTCString()+"; path=/; SameSite=Strict;";a.getWindow().document.cookie=i}function N(){const e=T?c()+"resources/app.version.json":"/../resources/app.version.json";const t=new p("");t.call("get",e).then(e=>e.json()).then(e=>{w=String(e.version);m.info("Version: "+e.version)}).catch(e=>{m.error("Error fetching version: "+e)})}});
//# sourceMappingURL=AppJourney.js.map