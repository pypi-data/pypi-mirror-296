<mvc:View
  controllerName="demo.spa.controller.Team"
  xmlns:core="sap.ui.core"
  xmlns="sap.m"
  xmlns:mvc="sap.ui.core.mvc"
  height="99%"
>
  <Page
    showHeader="false"
    visible="{= ${frontend>/currentUser/username} !== ''}"
  >
    <content>
      <List
        id="idTeamMemberList"
        class="customCenteredHeader"
        items="{path: 'userData>/person_list',
                sorter:{ path: '', comparator: '.comparePersons'}}"
      >
        <headerToolbar>
          <OverflowToolbar>
            <ToolbarSpacer />
            <Title
              text="{i18n>team.title}"
              level="H1"
            />
            <ToolbarSpacer />
          </OverflowToolbar>
        </headerToolbar>
        <StandardListItem
          busyIndicatorDelay="100"
          description="{userData>email}"
          detailPress="onPersonEditPress"
          press="onPersonListItemPress"
          icon="{= ${userData>related_user} === ${frontend>/currentUser/user_id}? 'sap-icon://customer' : 'sap-icon://person-placeholder'}"
          iconInset="false"
          title="{userData>first_name} {userData>last_name}"
          type="DetailAndActive"
        >
          <customData>
            <core:CustomData
              key="person"
              value="{userData>}"
            />
          </customData>
        </StandardListItem>
      </List>
    </content>
    <footer>
      <OverflowToolbar>
        <ToolbarSpacer />
        <Button
          icon="sap-icon://add-employee"
          text="{i18n>create}"
          tooltip="{i18n>team.btnAddMember}"
          press=".onAddPersonPress"
          type="Accept"
        />
        <ToolbarSpacer />
      </OverflowToolbar>
    </footer>
  </Page>
  <core:Fragment
    fragmentName="demo.spa.view.LoginRequiredPage"
    type="XML"
  />
</mvc:View>
