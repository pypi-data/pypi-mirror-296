<core:FragmentDefinition
  xmlns:layout="sap.ui.layout"
  xmlns="sap.m"
  xmlns:f="sap.ui.layout.form"
  xmlns:core="sap.ui.core"
>
  <Dialog
    busyIndicatorDelay="100"
    id="idAvailabilityDialog"
    showHeader="false"
  >
    <Toolbar>
      <Title
        class="sapUiTinyMargin"
        text="{i18n>calendar.availability}"
      />
      <ToolbarSpacer />
      <Button
        class="sapUiTinyMargin"
        icon="sap-icon://decline"
        press="onCancelDialog"
        tooltip="{i18n>close}"
        type="Transparent"
      />
    </Toolbar>
    <buttons>
      <Button
        text="{i18n>save}"
        type="Emphasized"
        icon="sap-icon://save"
        press="onSaveBtnPress"
        enabled="{parts:
                    [
                        'frontend>/availabilityForm/date',
                        'frontend>/availabilityForm/startTime',
                        'frontend>/availabilityForm/endTime'
                    ],
                    formatter: '.validateCalendarItemForm'
                }"
      />
      <Button
        icon="sap-icon://delete"
        press="onDeleteDialog"
        text="{i18n>delete}"
        type="Ghost"
        visible="{= ${frontend>/availabilityForm/id}? true : false }"
      />
    </buttons>
    <f:SimpleForm
      id="idAvailabilityEditForm"
      layout="ResponsiveGridLayout"
      singleContainerFullSize="false"
    >
      <Label
        text="{i18n>calendar.itemDialog.person}"
        labelFor="idPersonInput"
        visible="false"
      />
      <Input
        id="idPersonInput"
        value="{path: 'frontend>/lastChosenPerson', formatter: '.idsToPersonNames'}"
        editable="false"
      />
      <Label
        text="{i18n>calendar.availability}"
        labelFor="idSegmentedButtonPreferred"
      />
      <SegmentedButton
        id="idSegmentedButtonPreferred"
        width="100%"
        selectedKey="{= ${frontend>/availabilityForm/is_preferred} ? 'yes' : 'no' }"
      >
        <items>
          <SegmentedButtonItem
            icon="sap-icon://thumb-up"
            key="yes"
            press="onPreferredPress"
          />
          <SegmentedButtonItem
            icon="sap-icon://thumb-down"
            key="no"
            press="onPreferredPress"
          />
        </items>
      </SegmentedButton>
      <Label
        text="{i18n>calendar.itemDialog.date}"
        labelFor="idDateInput"
      />
      <DatePicker
        id="idDateInput"
        required="true"
        value="{frontend>/availabilityForm/date}"
        placeholder=" "
        valueFormat="yyyy-MM-dd"
      />
      <Label
        text="{i18n>calendar.itemDialog.from}"
        labelFor="idStartTimePicker"
      />
      <TimePicker
        id="idStartTimePicker"
        minutesStep="5"
        displayFormat="HH:mm"
        valueFormat="HH:mm"
        placeholder="--:--"
        value="{frontend>/availabilityForm/startTime}"
        required="true"
      />
      <Label
        text="{i18n>calendar.itemDialog.to}"
        labelFor="idEndTimePicker"
      />
      <TimePicker
        id="idEndTimePicker"
        minutesStep="5"
        displayFormat="HH:mm"
        valueFormat="HH:mm"
        value="{frontend>/availabilityForm/endTime}"
        placeholder="--:--"
        required="true"
      />
    </f:SimpleForm>
  </Dialog>
</core:FragmentDefinition>
