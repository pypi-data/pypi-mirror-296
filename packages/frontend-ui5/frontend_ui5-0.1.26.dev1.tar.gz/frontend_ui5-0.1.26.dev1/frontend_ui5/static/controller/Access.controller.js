"use strict";sap.ui.define(["sap/base/Log","./BaseController","./utils/Cookies"],function(e,t,s){"use strict";function o(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const n=o(t);const i=s["getCSRFCookie"];const a=n.extend("demo.spa.controller.Access",{constructor:function t(){n.prototype.constructor.apply(this,arguments);this.logger=e.getLogger(a.getMetadata().getName())},_:function e(){this.onInit()},onContinuePress:function e(){const t=this.byId("idNameInput");const s=t.getValue().replaceAll(" ","").toLowerCase();t.setValue("");n.connector.signIn({username:this.userKey,password:s}).then(e=>this.handleSuccess(e),this.handleFailure.bind(this))},onCancelPress:function e(){this.dialog.close();this.navToHome()},onInit:function e(){this.getRouter().attachRoutePatternMatched(e=>{if(e.getParameter("name")=="ACCESS FULLSCREEN"){this.userKey=e.getParameter("arguments").userKey;this.openAccessDialog()}})},openAccessDialog:function e(){if(!i()){void this.noCSRFTokenMessageBox();return}else if(this.dialog){this.dialog.open()}else{this.loadFragment({name:"demo.spa.view.AccessDialog"}).then(e=>{this.dialog=e;this.dialog.open()}).catch(e=>{this.logger.error(String(e))})}},handleFailure:function e(t){this.dialog.setBusy(false);this.failedResponseToMessageBox(t)},handleSuccess:function e(t){t.json().then(e=>{this.loginUser(e.username,e.user_id);this.getRouter().fireRouteMatched({name:"AVAILABILITY CHOICES"});this.getRouter().navTo("AVAILABILITY CHOICES")}).catch(e=>{this.logger.error(String(e))}).finally(()=>{this.dialog.setBusy(false);this.dialog.close()})}});return a});
//# sourceMappingURL=Access.controller.js.map