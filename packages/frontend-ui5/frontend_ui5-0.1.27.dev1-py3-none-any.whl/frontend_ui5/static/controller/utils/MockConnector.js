"use strict";sap.ui.define(["sap/base/Log","./MockDataProvider","./Random"],function(e,s,t){"use strict";function r(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const n=r(s);const o=r(t);class i{static deferResponse=false;static nextStatusCodes=(()=>[])();logger=(()=>e.getLogger("MockConnector"))();mockDataProvider=(()=>new n)();random=(()=>new o(12345))();constructor(){this.logger.setLevel(e.Level.INFO)}create(e){return this.createMockResponse(e,true)}delete(e){return this.createMockResponse(e)}get(e,s){return this.createMockResponse({id:s,_type:e})}getAll(e){return this.createMockResponse({id:"",_type:"mock-list-"+e})}getUserData(){return this.createMockResponse({id:"",_type:"mock-data"})}signIn(e){return this.createMockResponse({username:e.username,user_id:"id-mock-user",password:e.password})}signOut(){return this.createMockResponse({id:"",_type:"mock-data"})}signUp(e){return this.createMockResponse({username:e.username,user_id:"id-mock-user",password:e.password})}update(e){return this.createMockResponse(e)}createMockResponse(e,s){return new Promise((t,r)=>{setTimeout(()=>{const n={...e};if(s){n.id=String(this.random.randIntBetween(1e5,999999))}let o=200;if(i.nextStatusCodes.length>0){o=i.nextStatusCodes.shift();this.logger.info(`MockConnector: next status code is ${o}`)}if(o>=400){r(new Response(JSON.stringify(n),{status:o}))}else if(o>=200){if(n._type==="mock-list-person"){t(a(this.mockDataProvider.generateRandomPersons(),o))}else if(n._type==="mock-list-appointment"){t(a(this.mockDataProvider.generateRandomAppointments(),o))}else if(n._type==="mock-list-slot"){t(a(this.mockDataProvider.generateRandomSlots(),o))}else if(e.username){const s=this.mockDataProvider.generateRandomPersons().find(s=>s.key==e.username);if(s){const i=s.first_name+" "+s.last_name;if(e.password.replaceAll(" ","").toLowerCase()!=i.replaceAll(" ","").toLowerCase()){r(new Response(JSON.stringify(n),{status:401}))}if(e.password)t(new Response(JSON.stringify({username:i,user_id:s.related_user}),{status:o}))}else{t(new Response(JSON.stringify(n),{status:o}))}}t(new Response(JSON.stringify(n),{status:o}))}else if(o===-1){r(new TypeError("NetworkError when attempting to fetch resource."))}else if(o===-2){r(new Error("Test Error from MockConnector"))}},i.deferResponse?this.random.random()*1500:0)})}}function a(e,s){return new Response(JSON.stringify({count:0,next:null,previous:null,results:e}),{status:s})}return i});
//# sourceMappingURL=MockConnector.js.map