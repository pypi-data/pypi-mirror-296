# https://stackoverflow.com/questions/34724980/finding-a-string-in-docker-logs-of-container
- shell: docker logs flops_manager 2>&1 | grep "flops_manager/aggregator/success" | awk -F"'" '{print $2}'
  register: log_output

- name: Extract JSON string from log
  set_fact:
    json_string: "{{ log_output.stdout | from_json }}"
  
- name: Append new entry to CSV file
  ansible.builtin.lineinfile:
    path: /tmp/flops_trained_models.csv
    line: "{{ item }},{{ json_string.accuracy }},{{ json_string.loss }}"
    state: present
    create: yes
